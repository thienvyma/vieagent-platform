#!/bin/bash

# ğŸš€ Production Migration Script
# Generated by Day 31 Production Preparation

set -e

echo "ğŸš€ Starting production migration..."

# 1. Backup current database
echo "ğŸ“¦ Creating database backup..."
cp prisma/dev.db "backups/production/backup-$(date +%Y%m%d_%H%M%S).db" || echo "âš ï¸ Backup failed, continuing..."

# 2. Generate Prisma client
echo "ğŸ”§ Generating Prisma client..."
npx prisma generate

# 3. Run database migrations
echo "ğŸ—„ï¸ Running database migrations..."
npx prisma migrate deploy

# 4. Verify migration
echo "âœ… Verifying migration..."
npx prisma db pull --print

echo "ğŸ‰ Production migration completed successfully!"
